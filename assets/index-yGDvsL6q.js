import{s as qe,a as Fe,m as Re,t as $,i as m,c,S as T,b as M,d as C,e as je,f as y,g as d,h as z,u as ge,l as H,j as ze,k as Ne,r as Be,n as He,o as pe,p as Oe,q as O,v as F,w as me,x as We,y as Ve,z as X,A as fe,B as k,C as Xe,I as Je,D as K,F as Z,E as J,G as Ze,H as Ge,J as Qe,K as Ee,L as Ke,M as Ye,N as et,O as tt,P as st,Q as nt,R as at,T as ot,U as rt,V as S,W as lt,X as it,Y as U,Z as ct,_ as dt,$ as ut,a0 as gt}from"./vendor-zz06Ag2Q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const pt="modulepreload",mt=function(e,t){return new URL(e,t).href},ee={},A=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){const o=document.getElementsByTagName("link");n=Promise.all(a.map(r=>{if(r=mt(r,s),r in ee)return;ee[r]=!0;const g=r.endsWith(".css"),i=g?'[rel="stylesheet"]':"";if(!!s)for(let p=o.length-1;p>=0;p--){const f=o[p];if(f.href===r&&(!g||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const u=document.createElement("link");if(u.rel=g?"stylesheet":pt,g||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),g)return new Promise((p,f)=>{u.addEventListener("load",p),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})}))}return n.then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},ft=C('<div class="loading loading-spinner">'),ht=C('<button><span class="truncate rounded-none">'),he=e=>{const[t,a]=qe(e,["class","loading","icon"]);return(()=>{const s=ht(),n=s.firstChild;return Fe(s,Re({get class(){return $("btn flex items-center",t.loading?"btn-disabled":t.class)}},a),!1,!0),m(s,c(T,{get when(){return t.loading},get children(){return ft()}}),n),m(n,()=>e.icon||e.children),M(()=>n.classList.toggle("flex-1",!t.icon)),s})()},vt=["acid","aqua","autumn","black","bumblebee","business","cmyk","coffee","corporate","cupcake","cyberpunk","dark","dim","dracula","emerald","fantasy","forest","garden","halloween","lemonade","light","lofi","luxury","night","nord","pastel","retro","sunset","synthwave","valentine","winter","wireframe"];var P=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e.Setup="/setup",e))(P||{});const yt=10,Vs={title:{align:"center",style:{color:"gray",fontSize:"16px"}},chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{easing:"linear"}},noData:{text:"Loading..."},legend:{showForSingleSeries:!0,fontSize:"16px",labels:{colors:"gray"},itemMargin:{horizontal:32}},dataLabels:{enabled:!1},grid:{yaxis:{lines:{show:!1}}},stroke:{curve:"smooth"},tooltip:{enabled:!1},xaxis:{range:yt,labels:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"gray",fontSize:"13px"},formatter:e=>je(e,{units:"iec"}).toString()}}};var Y=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=400]="MEDIUM",e[e.HIGH=800]="HIGH",e))(Y||{}),ve=(e=>(e.OFF="off",e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(ve||{}),D=(e=>(e.NATURAL="orderNatural",e.LATENCY_ASC="orderLatency_asc",e.LATENCY_DESC="orderLatency_desc",e.NAME_ASC="orderName_asc",e.NAME_DESC="orderName_desc",e))(D||{}),W=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(W||{}),ye=(e=>(e.ID="ID",e.Host="host",e.Chains="chains",e.Type="type",e.Rule="rules",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.ConnectTime="connectTime",e.SourceIP="sourceIP",e.SourcePort="sourcePort",e.Destination="destination",e.InboundUser="inboundUser",e.Process="process",e.SniffHost="sniffHost",e.Close="close",e.Details="details",e))(ye||{});const te=200,be=Object.values(ye),bt={...Object.fromEntries(be.map(e=>[e,!0])),ID:!1};var I=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e))(I||{}),wt=(e=>(e.Global="global",e.Rule="rule",e.Direct="direct",e))(wt||{}),we=(e=>(e.Info="info",e.Error="error",e.Warning="warning",e.Debug="debug",e.Silent="silent",e))(we||{});const xt=[200,300,500,800,1e3],Pt=xt[0],[Xs,Js]=y(d(ve.Auto),{name:"proxiesPreviewType",storage:localStorage}),[Zs,Gs]=y(d(D.NATURAL),{name:"proxiesOrderingType",storage:localStorage}),[Qs,Es]=y(d(!1),{name:"hideUnAvailableProxies",storage:localStorage}),[Ct,Ks]=y(d(!0),{name:"renderProxiesInTwoColumns",storage:localStorage}),[G,Ys]=y(d("https://www.gstatic.com/generate_204"),{name:"urlForLatencyTest",storage:localStorage}),[Q,en]=y(d(""),{name:"urlForIPv6SupportTest",storage:localStorage}),[$t,tn]=y(d(!0),{name:"autoCloseConns",storage:localStorage}),[Tt,sn]=y(d(!1),{name:"autoSwitchTheme",storage:localStorage}),[St,nn]=y(d("nord"),{name:"favDayTheme",storage:localStorage}),[Lt,an]=y(d("sunset"),{name:"favNightTheme",storage:localStorage}),[on,rn]=y(d(I.XS),{name:"connectionsTableSize",storage:localStorage}),[ln,cn]=y(d(bt),{name:"connectionsTableColumnVisibility",storage:localStorage}),[dn,un]=y(d(be),{name:"connectionsTableColumnOrder",storage:localStorage}),[gn,pn]=y(d([]),{name:"clientSourceIPTags",storage:localStorage}),[mn,fn]=y(d(I.XS),{name:"logsTableSize",storage:localStorage}),[hn,vn]=y(d(we.Info),{name:"logLevel",storage:localStorage}),[yn,bn]=y(d(Pt),{name:"logMaxRows",storage:localStorage}),wn=e=>{let t="table-xs";switch(e){case I.XS:t="table-xs";break;case I.SM:t="table-sm";break;case I.MD:t="table-md";break;case I.LG:t="table-lg";break}return t},[B,xn]=y(d(5e3),{name:"latencyTestTimeoutDuration",storage:localStorage}),L=()=>Y,[Dt,xe]=d([]),[Pe,It]=d(null),Pn=()=>{const[e,t]=d([]),[a,s]=d([]),[n,o]=d(!1);return z(()=>{var g;const r=(g=Pe())==null?void 0:g.connections;r&&ge(()=>{const i=Ce(r,a());if(_t(a()),!n()){const l=kt(i,Dt());s(i),t(l.slice(-te))}xe(l=>l.slice(-(i.length+te)))})}),{closedConnections:e,activeConnections:a,paused:n,setPaused:o}},Ce=(e,t)=>{const a=new Map;return t.forEach(s=>a.set(s.id,s)),e.map(s=>{const n=a.get(s.id);return!n||!H.isNumber(n.download)||!H.isNumber(n.upload)?{...s,downloadSpeed:0,uploadSpeed:0}:{...s,downloadSpeed:s.download-n.download,uploadSpeed:s.upload-n.upload}})},_t=e=>{xe(t=>H.unionWith(t,e,(a,s)=>a.id===s.id))},kt=(e,t)=>H.differenceWith(t,e,(a,s)=>a.id===s.id),Mt={add:"Add",overview:"Overview",proxies:"Proxies",proxiesSettings:"Proxies Settings",rules:"Rules",connections:"Connections",connectionsSettings:"Connections Settings",connectionsDetails:"Connections Details",logs:"Logs",logsSettings:"Logs Settings",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",sniffHost:"Sniff Host",chains:"Chains",connectTime:"Time",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",sourceIP:"Source IP",sourcePort:"Source Port",destination:"Destination",inboundUser:"Inbound User",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",off:"Off",proxiesPreviewType:"Proxies preview type",urlForIPv6SupportTest:"URL for IPv6 support test",urlForLatencyTest:"URL for latency test",autoCloseConns:"Automatically Close connections",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render in two columns",updateGEODatabases:"Update GEO Databases",restartCore:"Restart Core",upgradeCore:"Upgrade Core",proxiesSorting:"Proxies Sorting",orderNatural:"Original order in config file",orderLatency_asc:"By latency from low to high",orderLatency_desc:"By latency from high to low",orderName_asc:"By name alphabetically (A-Z)",orderName_desc:"By name alphabetically (Z-A)",ms:"ms",updated:"Updated",tableSize:"Table size",logLevel:"Log Level",info:"info",silent:"silent",debug:"debug",warning:"warning",error:"error",logMaxRows:"Log Maximum Reserved Rows",xs:"Extra small size",sm:"Small size",md:"Normal size",lg:"Large size",switchEndpoint:"Switch Endpoint",switchLanguage:"Switch Language",latencyTestTimeoutDuration:"Latency Test Timeout Duration",all:"All",sequence:"Sequence",payload:"Payload",details:"Details",endpointURL:"Endpoint URL",secret:"Secret",global:"Global",rule:"Rule",direct:"Direct",active:"Active",closed:"Closed",sort:"Sort",hideUnAvailableProxies:"Hide UnAvailable Proxies",reloadConfig:"Reload Config",flushFakeIP:"Flush Fake-IP",tagClientSourceIPWithName:"Tag Client Source IP With Name",tag:"Tag",coreConfig:"Core Config",xdConfig:"XD Config",version:"Version",expire:"Expire",noExpire:"Null",allowLan:"Allow Lan",enableTunDevice:"Enable TUN Device",tunModeStack:"TUN Mode Stack",tunDeviceName:"TUN Device Name",interfaceName:"Interface Name",en:"English",zh:"Chinese",port:"{{ name }} Port"},Ut={add:"添加",overview:"概览",proxies:"代理",proxiesSettings:"代理设置",rules:"规则",connections:"连接",connectionsSettings:"连接设置",connectionsDetails:"连接详情",logs:"日志",logsSettings:"日志设置",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",sniffHost:"嗅探域名",chains:"链路",connectTime:"连接时间",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",sourceIP:"源地址",sourcePort:"源端口",destination:"目标地址",inboundUser:"入站用户",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",off:"关闭",proxiesPreviewType:"节点组预览样式",urlForIPv6SupportTest:"测试 IPv6 支持链接",urlForLatencyTest:"测速链接",autoCloseConns:"自动断开连接",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"双列渲染",updateGEODatabases:"更新 GEO 数据库",restartCore:"重启核心",upgradeCore:"更新核心",proxiesSorting:"节点排序",orderNatural:"原配置文件中的排序",orderLatency_asc:"按延迟从低到高",orderLatency_desc:"按延迟从高到低",orderName_asc:"按名称字母排序 (A-Z)",orderName_desc:"按名称字母排序 (Z-A)",ms:"毫秒",updated:"更新于",tableSize:"表格大小",logLevel:"日志等级",info:"信息",silent:"静默",debug:"调试",warning:"警告",error:"错误",logMaxRows:"日志最大保留行数",xs:"超小尺寸",sm:"小尺寸",md:"正常尺寸",lg:"超大尺寸",switchEndpoint:"切换后端",switchLanguage:"切换语言",latencyTestTimeoutDuration:"测速超时时间",all:"全部",sequence:"序列号",payload:"内容",details:"详情",endpointURL:"后端地址",secret:"密钥",global:"全局",rule:"规则",direct:"直连",active:"活动",closed:"已关闭",sort:"排序",hideUnAvailableProxies:"隐藏不可用节点",reloadConfig:"重载配置",flushFakeIP:"清空 Fake-IP",tagClientSourceIPWithName:"为客户端源 IP 地址添加名称标记",tag:"标记",coreConfig:"核心配置",xdConfig:"XD 配置",version:"版本",expire:"到期时间",noExpire:"不限时",allowLan:"允许局域网访问",enableTunDevice:"开启 TUN 转发",tunModeStack:"TUN 模式堆栈",tunDeviceName:"TUN 设备名称",interfaceName:"接口名称",en:"英文",zh:"中文",port:"{{ name }} 端口"},$e={[W.EN]:Mt,[W.ZH]:Ut},[Te,Cn]=y(d(Reflect.has($e,navigator.language)?navigator.language:W.EN),{name:"lang",storage:localStorage}),[At,qt]=ze(e=>[Ne(()=>He($e[e.locale]),Be)]),Se=()=>qt(),$n=e=>pe(e).locale(Te()).fromNow(),[Ft,Rt]=d(""),Tn=()=>w().delete("connections"),jt=e=>w().delete(`connections/${encodeURIComponent(e)}`),[Sn,se]=d(!1),[Ln,ne]=d(!1),[Dn,ae]=d(!1),[In,oe]=d(!1),[_n,re]=d(!1),kn=async()=>{const e=w();se(!0);try{await e.put("configs",{searchParams:{force:!0},json:{path:"",payload:""}})}catch{}se(!1)},Mn=async()=>{const e=w();ae(!0);try{await e.post("cache/fakeip/flush")}catch{}ae(!1)},Un=async()=>{const e=w();ne(!0);try{await e.post("configs/geo")}catch{}ne(!1)},An=async()=>{const e=w();oe(!0);try{await e.post("upgrade")}catch{}oe(!1)},qn=async()=>{const e=w();re(!0);try{await e.post("restart")}catch{}re(!1)},Fn=()=>w().get("configs").json(),Rn=async(e,t,a)=>{try{await w().patch("configs",{json:{[e]:t}}).json(),await a()}catch(s){Oe.error(s.message)}},zt=async()=>{const e=w(),{version:t}=await e.get("version").json();return t},Nt=()=>w().get("providers/proxies").json(),Bt=()=>w().get("proxies").json(),le=e=>w().put(`providers/proxies/${encodeURIComponent(e)}`),Le=e=>w().get(`providers/proxies/${encodeURIComponent(e)}/healthcheck`,{timeout:5*1e3}).json(),Ht=(e,t)=>w().put(`proxies/${encodeURIComponent(e)}`,{body:JSON.stringify({name:t})}),ie=(e,t,a,s)=>{const n=w();return t!==""?Le(t).then(o=>({delay:o[e]})):n.get(`proxies/${encodeURIComponent(e)}/delay`,{searchParams:{url:a,timeout:s}}).json()},ce=(e,t,a)=>w().get(`group/${encodeURIComponent(e)}/delay`,{searchParams:{url:t,timeout:a}}).json(),jn=()=>w().get("rules").json(),zn=()=>w().get("providers/rules").json(),Nn=e=>w().put(`providers/rules/${encodeURIComponent(e)}`),Bn=async e=>{const t="https://api.github.com/repos/MetaCubeX/mihomo",a=/(alpha|beta|meta)-?(\w+)/.exec(e);if(!a)return!1;const s=a[1],n=a[2];if(s==="meta"){const{assets:o}=await O.get(`${t}/releases/latest`).json();return!o.some(({name:g})=>g.includes(n))}if(s==="alpha"){const{assets:o}=await O.get(`${t}/releases/tags/Prerelease-Alpha`).json();return!o.some(({name:g})=>g.includes(n))}return!1},Hn=F(()=>Ft().includes("sing-box")),On=e=>/^https?/.test(e)?e:`${window.location.protocol}//${e}`,N=e=>{const[t,a]=e?y(d({}),{name:e,storage:localStorage}):d({}),s=(o,r)=>{a({...t(),[o]:r})};return{map:t,set:s,setWithCallback:async(o,r)=>{s(o,!0);try{await r()}catch{}s(o,!1)}}},Ot=(e="")=>{const t=e.toLowerCase();return t.includes("shadowsocks")?t.replace("shadowsocks","ss"):t.includes("hysteria")?t.replace("hysteria","hy"):t==="wireguard"?"wg":t},Wt=(e="")=>{const t=e.toLowerCase();return!["selector","direct","reject","urltest","loadbalance","fallback","relay"].includes(t)},Wn=(e,t,a,s)=>a===D.NATURAL?e:e.sort((n,o)=>{if(s!=null&&s.has(n)&&!(s!=null&&s.has(o)))return-1;if(s!=null&&s.has(o)&&!(s!=null&&s.has(n)))return 1;const r=t[n],g=t[o];switch(a){case D.LATENCY_ASC:return r===L().NOT_CONNECTED?1:g===L().NOT_CONNECTED?-1:r-g;case D.LATENCY_DESC:return r===L().NOT_CONNECTED?1:g===L().NOT_CONNECTED?-1:g-r;case D.NAME_ASC:return n.localeCompare(o);case D.NAME_DESC:return o.localeCompare(n);default:return 0}}),Vn=(e,t,a,s)=>s?e.filter(n=>a!=null&&a.has(n)?!0:t[n]!==L().NOT_CONNECTED):e,{map:Vt,set:Xt}=N("collapsedMap"),{map:Jt,setWithCallback:Zt}=N(),{map:Gt,setWithCallback:Qt}=N(),{map:Et,setWithCallback:Kt}=N(),{map:Yt,setWithCallback:es}=N(),[ts,de]=d(!1),[ss,ns]=d([]),[as,os]=d(new Set),[ue,rs]=d([]),[De,E]=d({}),[Ie,j]=d({}),[_e,ls]=d({}),is=e=>{var g;const t={..._e()},a={...De()},s={...Ie()},n=(i,l,u=!0)=>{var f,b,x,h;const p=(f=i.extra)==null?void 0:f[l];if(Array.isArray(p)){const v=(b=p.at(-1))==null?void 0:b.delay;if(v)return v}if(u)return(h=(x=i.history)==null?void 0:x.at(-1))==null?void 0:h.delay},o={};e.forEach(i=>{const{udp:l,xudp:u,type:p,now:f,name:b,provider:x=""}=i;if(t[i.name]={udp:l,xudp:u,type:p,now:f,name:b,provider:x},!f)a[i.name]=n(i,G())||L().NOT_CONNECTED;else if(a[f]!==void 0)a[i.name]=a[f];else{const v=o[f]??new Set;v.add(i.name),o[f]=v}const h=(n(i,Q(),!1)??0)>0;s[i.name]=h});const r=Object.keys(o).filter(i=>a[i]!==void 0);for(;r.length>0;){const i=r.shift(),l=a[i];for(const u of((g=o[i])==null?void 0:g.values())??[])a[u]=l,r.push(u)}me(()=>{ls(t),E(a),j(s)})},V=()=>{const e=async()=>{const[{providers:l},{proxies:u}]=await Promise.all([Nt(),Bt()]),p=[...u.GLOBAL.all??[],"GLOBAL"],f=Object.values(u).filter(h=>{var v;return(v=h.all)==null?void 0:v.length}).sort((h,v)=>p.indexOf(h.name)-p.indexOf(v.name)),b=Object.values(l).filter(h=>h.name!=="default"&&h.vehicleType!=="Compatible"),x=[...Object.values(u),...b.flatMap(h=>h.proxies.filter(v=>!(v.name in u)).map(v=>({...v,provider:h.name})))];me(()=>{ns(f),os(new Set(["DIRECT","REJECT",...f.map(h=>h.name)])),rs(b),is(x)})},t=async(l,u)=>{await Ht(l.name,u),await e(),$t()&&ge(()=>{var f;const p=Ce(((f=Pe())==null?void 0:f.connections)??[],[]);p.length>0&&p.forEach(({id:b,chains:x})=>{x.includes(l.name)&&jt(b)})})},a=async(l,u)=>{const p=Q();if(!p||p.length===0){j({});return}let f=!1;try{const{delay:b}=await ie(l,u,p,B());f=b>0}catch{f=!1}j(b=>({...b,[l]:f}))},s=async l=>{const u=Q();if(!u||u.length===0){j({});return}const p=await ce(l,u,B()),f=Object.fromEntries(Object.entries(p).map(([b,x])=>[b,x>0]));j(b=>({...b,...f}))};return{collapsedMap:Vt,setCollapsedMap:Xt,proxyIPv6SupportMap:Ie,proxyLatencyTestingMap:Jt,proxyGroupLatencyTestingMap:Gt,proxyProviderLatencyTestingMap:Et,updatingMap:Yt,isAllProviderUpdating:ts,proxies:ss,proxyGroupNames:as,proxyProviders:ue,proxyLatencyTest:async(l,u)=>{Zt(l,async()=>{const{delay:p}=await ie(l,u,G(),B());E(f=>({...f,[l]:p}))}),await a(l,u)},proxyGroupLatencyTest:async l=>{Qt(l,async()=>{const u=await ce(l,G(),B());E(p=>({...p,...u})),await e()}),await s(l)},latencyMap:De,proxyNodeMap:_e,fetchProxies:e,selectProxyInGroup:t,updateProviderByProviderName:l=>es(l,async()=>{try{await le(l)}catch{}await e()}),updateAllProvider:async()=>{de(!0);try{await Promise.allSettled(ue().map(l=>le(l.name))),await e()}finally{de(!1)}},proxyProviderLatencyTest:l=>Kt(l,async()=>{await Le(l),await e()})}},[ke,Xn]=y(d(""),{name:"selectedEndpoint",storage:localStorage}),[cs,Jn]=y(d([]),{name:"endpointList",storage:localStorage}),w=()=>{const e=_();if(!e)return O.create({});const t=new Headers;return e.secret&&t.set("Authorization",`Bearer ${e.secret}`),O.create({prefixUrl:e.url,headers:t})},_=()=>cs().find(({id:e})=>e===ke());z(async()=>{ke()&&Rt(await zt())});const ds=()=>{var e;return(e=_())==null?void 0:e.secret},us=()=>{var e;return new URL(((e=_())==null?void 0:e.url)??"").origin.replace("http","ws")},gs=(e,t={})=>{const a=new URLSearchParams(t);a.set("token",ds()??"");const s=We(`${us()}/${e}?${a.toString()}`),n=Ve(s,"message");return F(()=>{var r;return n()?JSON.parse((r=n())==null?void 0:r.data):null})},[ps,Me]=y(d("sunset"),{name:"theme",storage:localStorage}),ms=C('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>'),Zn=e=>{const{title:t,onCollapse:a}=e,s=()=>{const o="collapse-open",r="collapse-close";return e.isOpen?o:r},n=()=>{const o="opacity-100",r="opacity-0";return e.isOpen?o:r};return(()=>{const o=ms(),r=o.firstChild,g=r.nextSibling;return r.$$click=()=>a(!e.isOpen),m(r,t),m(g,c(T,{get when(){return e.isOpen},get children(){return fe(()=>e.children)()}})),M(i=>{const l=$(s(),"collapse collapse-arrow select-none border-secondary bg-base-200 shadow-md"),u=$(n(),"collapse-content grid grid-cols-2 gap-2 transition-opacity duration-1000",Ct()?"sm:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 min-[1700px]:grid-cols-4":"sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 min-[1700px]:grid-cols-8");return l!==i._v$&&k(o,i._v$=l),u!==i._v$2&&k(g,i._v$2=u),i},{_v$:void 0,_v$2:void 0}),o})()};X(["click"]);const fs=C('<li class="tooltip tooltip-bottom">'),hs=C('<div class="drawer drawer-end w-auto sm:ml-auto"><input id=themes type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=themes class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side overflow-x-hidden"><label for=themes class=drawer-overlay></label><ul class="menu h-full gap-2 rounded-l-box bg-base-300 p-2">'),vs=C('<li class="btn btn-xs">'),ys=C('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal menu-lg gap-2 p-0">'),bs=C('<ul class="navbar z-50 flex w-auto items-center justify-center bg-base-300 px-4 shadow-lg"><div class="navbar-start gap-4"><div class="drawer w-auto lg:hidden"><input id=navs type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=navs class="btn btn-circle drawer-button btn-sm"></label></div><div class=drawer-side><label for=navs class=drawer-overlay></label><ul class="menu min-h-full w-2/5 gap-2 rounded-r-box bg-base-300 pt-20"></ul></div></div></div><div class=navbar-end><div class="flex items-center gap-2">'),ws=C("<li>"),xs=({href:e,tooltip:t,children:a})=>(()=>{const s=fs();return J(s,"data-tip",t),m(s,c(K,{class:"rounded-box",href:e,children:a})),s})(),Ps=()=>(()=>{const e=hs(),t=e.firstChild,a=t.nextSibling,s=a.firstChild,n=a.nextSibling,o=n.firstChild,r=o.nextSibling;return m(s,c(Ze,{})),m(r,c(Z,{each:vt,children:g=>(()=>{const i=vs();return i.$$click=()=>Me(g),J(i,"data-theme",g),m(i,g),i})()})),e})(),Cs=()=>{const[e]=Se(),t=()=>[{href:P.Overview,name:e("overview"),icon:c(Ge,{})},{href:P.Proxies,name:e("proxies"),icon:c(Qe,{})},{href:P.Rules,name:e("rules"),icon:c(Ee,{})},{href:P.Conns,name:e("connections"),icon:c(Ke,{})},{href:P.Log,name:e("logs"),icon:c(Ye,{})},{href:P.Config,name:e("config"),icon:c(et,{})}],a=Xe(),[s,n]=d(!1);return(()=>{const o=bs(),r=o.firstChild,g=r.firstChild,i=g.firstChild,l=i.nextSibling,u=l.firstChild,p=l.nextSibling,f=p.firstChild,b=f.nextSibling,x=r.nextSibling,h=x.firstChild;return i.addEventListener("change",v=>n(v.target.checked)),m(u,c(Je,{})),m(b,c(Z,{get each(){return t()},children:({href:v,name:q})=>(()=>{const R=ws();return R.$$click=()=>n(!1),m(R,c(K,{href:v,children:q})),R})()})),m(r,c(Is,{}),null),m(o,c(T,{get when(){return a.pathname!==P.Setup},get children(){const v=ys(),q=v.firstChild;return m(q,c(Z,{get each(){return t()},children:({href:R,name:Ue,icon:Ae})=>c(xs,{href:R,tooltip:Ue,children:Ae})})),v}}),x),m(h,c(Ps,{})),M(()=>i.checked=s()),o})()};X(["click"]);const $s=C('<span class="badge badge-sm p-px"><span class=scale-75>IPv6'),Ts=e=>{const{proxyIPv6SupportMap:t}=V(),a=F(()=>t()[e.name]===!0);return c(T,{get when(){return a()},get children(){return $s()}})},Ss=C("<span>"),Ls=e=>{const[t]=Se(),{latencyMap:a}=V(),[s,n]=d(""),o=F(()=>a()[e.name]);return z(()=>{n("text-success"),o()>L().HIGH?n("text-error"):o()>L().MEDIUM&&n("text-warning")}),c(T,{get when(){return F(()=>typeof o()=="number")()&&o()!==Y.NOT_CONNECTED},get children(){const r=Ss();return m(r,o,null),m(r,()=>t("ms"),null),M(()=>k(r,$(`whitespace-nowrap text-xs ${s()}`,e.class))),r}})},Ds=C('<div class="text-md flex items-center gap-1 whitespace-nowrap font-bold uppercase sm:text-xl">'),Is=()=>(()=>{const e=Ds();return m(e,c(K,{class:"bg-gradient-to-br from-primary to-secondary bg-clip-text text-transparent",get href(){return _()?"/":"/setup"},children:"YAXD"})),e})(),_s=C('<div class="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur"><div class="flex justify-end gap-2">'),ks=C('<dialog class="modal modal-bottom sm:modal-middle"><div class="modal-box p-0"><div><div class="flex items-center gap-4 text-xl font-bold"><span></span></div></div><div class=p-4></div></div><form method=dialog class=modal-backdrop><button>'),Ms="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur",Gn=e=>{let t;return(()=>{const a=ks(),s=a.firstChild,n=s.firstChild,o=n.firstChild,r=o.firstChild,g=n.nextSibling;return tt(i=>{var l;return(t=i)&&((l=e.ref)==null?void 0:l.call(e,i))},a),s.$$contextmenu=i=>i.preventDefault(),m(o,()=>e.icon,r),m(r,()=>e.title),m(n,c(he,{class:"btn-circle btn-sm",onClick:()=>t==null?void 0:t.close(),get icon(){return c(st,{size:20})}}),null),m(g,fe(()=>e.children)),m(s,c(T,{get when(){return e.action},get children(){const i=_s(),l=i.firstChild;return m(l,()=>e.action),i}}),null),M(()=>k(n,$(Ms,"top-0 justify-between"))),a})()};X(["contextmenu"]);const Us=C('<div><div class="flex items-center justify-between gap-2"><span class="break-all text-left text-sm"></span><span class="flex items-center gap-1"></span></div><div class="flex items-center justify-between gap-1"><div>'),Qn=e=>{const{proxyLatencyTest:t,proxyLatencyTestingMap:a}=V(),{proxyName:s,isSelected:n,onClick:o}=e,{proxyNodeMap:r}=V(),g=F(()=>r()[s]),i=()=>{var l,u,p;return Wt((l=g())==null?void 0:l.type)&&((u=g())!=null&&u.xudp||(p=g())!=null&&p.udp)?"udp":null};return(()=>{const l=Us(),u=l.firstChild,p=u.firstChild,f=p.nextSibling,b=u.nextSibling,x=b.firstChild;return nt(l,"click",o,!0),J(l,"title",s),m(p,s),m(f,c(Ts,{get name(){return e.proxyName}}),null),m(f,c(he,{class:"btn-circle btn-ghost h-auto min-h-0 w-auto",get icon(){return c(at,{size:20,get class(){return $(a()[s]&&"animate-pulse text-success")}})},onClick:h=>{h.stopPropagation(),t(s,g().provider)}}),null),m(x,()=>{var h;return Ot((h=g())==null?void 0:h.type)},null),m(x,c(T,{get when(){return i()},get children(){return` :: ${i()}`}}),null),m(b,c(Ls,{get name(){return e.proxyName},get class(){return $(n&&"badge badge-sm px-1")}}),null),M(h=>{const v=$("border-neutral-focus card card-bordered tooltip-bottom flex flex-col justify-between gap-1 bg-neutral p-2 text-neutral-content",n&&"bg-gradient-to-br from-primary to-secondary text-primary-content",o&&"cursor-pointer"),q=$("text-xs text-slate-500",n&&"text-primary-content");return v!==h._v$&&k(l,h._v$=v),q!==h._v$2&&k(x,h._v$2=q),h},{_v$:void 0,_v$2:void 0}),l})()};X(["click"]);const As=C('<div><div class="flex-1 overflow-y-auto p-2"><div class=pb-8>'),qs=U(()=>A(()=>import("./Setup-QEdqMYvr.js"),__vite__mapDeps([0,1]),import.meta.url)),Fs=U(()=>A(()=>import("./Overview-FQqaEjJI.js"),__vite__mapDeps([2,1]),import.meta.url)),Rs=U(()=>A(()=>import("./Connections-5C9UaR4v.js"),__vite__mapDeps([3,1,4,5]),import.meta.url)),js=U(()=>A(()=>import("./Logs-cdGJn-XW.js"),__vite__mapDeps([6,1,4,5]),import.meta.url)),zs=U(()=>A(()=>import("./Proxies-_CEmH-y9.js"),__vite__mapDeps([7,1,5]),import.meta.url)),Ns=U(()=>A(()=>import("./Rules-f2nO5z8J.js"),__vite__mapDeps([8,1]),import.meta.url)),Bs=U(()=>A(()=>import("./Config-6UfkPd6V.js"),__vite__mapDeps([9,1,5]),import.meta.url)),Hs=()=>{const e=gs("connections");return z(()=>It(e())),null},Os=()=>{const e=ot();return z(()=>{Tt()&&Me(e()?Lt():St())}),c(At,{get locale(){return Te()},get children(){const t=As(),a=t.firstChild,s=a.firstChild;return m(t,c(Cs,{}),a),m(s,c(rt,{get children(){return[c(T,{get when(){return _()},get children(){return[c(S,{get path(){return P.Overview},component:Fs}),c(S,{get path(){return P.Proxies},component:zs}),c(S,{get path(){return P.Rules},component:Ns}),c(S,{get path(){return P.Conns},component:Rs}),c(S,{get path(){return P.Log},component:js}),c(S,{get path(){return P.Config},component:Bs}),c(S,{path:"*",get element(){return c(lt,{get href(){return P.Overview}})}})]}}),c(S,{get path(){return _()?P.Setup:"*"},component:qs})]}}),null),m(s,c(T,{get when(){return _()},get children(){return c(Hs,{})}}),null),m(t,c(it,{position:"bottom-center"}),null),M(n=>{const o=$("relative flex h-screen flex-col overscroll-y-none subpixel-antialiased"),r=ps();return o!==n._v$&&k(t,n._v$=o),r!==n._v$2&&J(t,"data-theme",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),t}})};pe.extend(ct);dt(()=>c(gt,{get source(){return ut()},get children(){return c(Os,{})}}),document.getElementById("root"));export{Zs as $,fn as A,he as B,yt as C,Vs as D,vn as E,bn as F,xt as G,mn as H,hn as I,yn as J,tn as K,we as L,Gn as M,Ys as N,xn as O,en as P,Gs as Q,D as R,Es as S,I as T,Ks as U,Js as V,ve as W,$t as X,G as Y,B as Z,Q as _,ke as a,Qs as a0,Ct as a1,Xs as a2,L as a3,V as a4,Hn as a5,Vn as a6,Wn as a7,Ls as a8,Zn as a9,an as aA,St as aB,Lt as aC,Ft as aD,Bn as aE,Fn as aF,Qn as aa,jn as ab,zn as ac,Nn as ad,N as ae,w as af,Rn as ag,Sn as ah,kn as ai,Ln as aj,Un as ak,Dn as al,Mn as am,In as an,An as ao,_n as ap,qn as aq,P as ar,wt as as,W as at,Cn as au,Te as av,sn as aw,Tt as ax,nn as ay,vt as az,Xn as b,gs as c,_ as d,cs as e,be as f,bt as g,rn as h,gn as i,pn as j,on as k,Pe as l,Dt as m,Pn as n,ye as o,jt as p,$n as q,dn as r,Jn as s,On as t,Se as u,ln as v,Tn as w,un as x,cn as y,wn as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Setup-QEdqMYvr.js","./vendor-zz06Ag2Q.js","./Overview-FQqaEjJI.js","./Connections-5C9UaR4v.js","./index-yYmmC4vu.js","./ConfigTitle-Fd4OdpHw.js","./Logs-cdGJn-XW.js","./Proxies-_CEmH-y9.js","./Rules-f2nO5z8J.js","./Config-6UfkPd6V.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}