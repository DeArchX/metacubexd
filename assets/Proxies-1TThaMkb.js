import{c as e,J as fe,i as t,y as f,F as U,b as w,d as v,at as me,au as ee,S as A,t as j,g as ue,E as xe,f as $e,av as pe,h as te,q as _e,v as be,a4 as we,k as ye,aw as ne,N as Ce,R as re,e as Pe}from"./vendor-XL6gZW1S.js";import{u as q,K as Se,N as Te,O as Le,P as Ne,Q as Ee,R as Ie,S as De,U as Me,V as ke,W as H,X as Oe,Y as Ae,Z as Ue,_ as Fe,$ as K,a0 as ge,a1 as Be,a2 as X,M as Re,a3 as D,a4 as Z,a5 as se,B as Y,a6 as je,a7 as le,a8 as He,a9 as ie,aa as ae,q as Ye}from"./index-yYnJVCOw.js";import{C as O}from"./ConfigTitle-mdfEp71g.js";const ze=v('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),We=v('<option class="flex items-center gap-2">'),Xe=v("<option>"),qe=n=>{const[s]=q();return e(Re,{ref:r=>{var i;return(i=n.ref)==null?void 0:i.call(n,r)},get icon(){return e(fe,{size:24})},get title(){return s("proxiesSettings")},get children(){const r=ze(),i=r.firstChild,c=i.firstChild,o=c.firstChild,g=i.nextSibling,h=g.firstChild,u=g.nextSibling,M=u.firstChild,$=u.nextSibling,L=$.firstChild,_=$.nextSibling,C=_.firstChild,m=_.nextSibling,N=m.firstChild,E=N.firstChild,P=m.nextSibling,I=P.firstChild,z=I.firstChild,W=P.nextSibling,R=W.firstChild;return t(i,e(O,{withDivider:!0,get children(){return s("autoCloseConns")}}),c),o.addEventListener("change",d=>Se(d.target.checked)),t(g,e(O,{withDivider:!0,get children(){return s("urlForLatencyTest")}}),h),h.addEventListener("change",d=>Te(d.target.value)),t(u,e(O,{withDivider:!0,get children(){return[f(()=>s("latencyTestTimeoutDuration"))," (",f(()=>s("ms")),")"]}}),M),M.addEventListener("change",d=>Le(Number(d.target.value))),t($,e(O,{withDivider:!0,get children(){return s("urlForIPv6SupportTest")}}),L),L.addEventListener("change",d=>{var x;return Ne((x=d.target.value)==null?void 0:x.trim())}),t(_,e(O,{withDivider:!0,get children(){return s("proxiesSorting")}}),C),C.addEventListener("change",d=>Ee(d.target.value)),t(C,e(U,{get each(){return Object.values(Ie)},children:d=>(()=>{const x=We();return x.value=d,t(x,()=>s(d)),x})()})),t(m,e(O,{withDivider:!0,get children(){return s("hideUnAvailableProxies")}}),N),E.addEventListener("change",d=>De(d.target.checked)),t(P,e(O,{withDivider:!0,get children(){return s("renderInTwoColumns")}}),I),z.addEventListener("change",d=>Me(d.target.checked)),t(W,e(O,{withDivider:!0,get children(){return s("proxiesPreviewType")}}),R),R.addEventListener("change",d=>ke(d.target.value)),t(R,e(U,{get each(){return Object.values(H)},children:d=>(()=>{const x=Xe();return x.value=d,t(x,()=>s(d)),x})()})),w(()=>o.checked=Oe()),w(()=>h.value=Ae()),w(()=>M.value=Ue()),w(()=>L.value=Fe()),w(()=>C.value=K()),w(()=>E.checked=ge()),w(()=>z.checked=Be()),w(()=>R.value=X()),r}})},ce=n=>{const s=()=>X()===H.OFF,r=f(()=>n.proxyNameList.length<=10),i=f(()=>{const o=X();return o===H.BAR||o===H.Auto&&!r()}),c=f(()=>{const o=X();return o===H.DOTS||o===H.Auto&&r()});return e(A,{get when(){return!s()},get children(){return e(me,{get children(){return[e(ee,{get when(){return i()},get children(){return e(Ve,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}}),e(ee,{get when(){return c()},get children(){return e(Ge,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}})]}})}})},Qe=v('<div class="flex items-center gap-2 py-1"><div class="my-2 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>'),Ve=n=>{const{latencyMap:s}=Z(),r=f(()=>n.proxyNameList.map(u=>s()[u])),i=f(()=>r().length),c=f(()=>r().filter(u=>u>D().NOT_CONNECTED&&u<=D().MEDIUM).length),o=f(()=>r().filter(u=>u>D().MEDIUM&&u<=D().HIGH).length),g=f(()=>r().filter(u=>u>D().HIGH).length),h=f(()=>r().filter(u=>u===D().NOT_CONNECTED).length);return(()=>{const u=Qe(),M=u.firstChild,$=M.firstChild,L=$.nextSibling,_=L.nextSibling,C=_.nextSibling;return w(m=>{const N=`${c()*100/i()}%`,E=`${o()*100/i()}%`,P=`${g()*100/i()}%`,I=`${h()*100/i()}%`;return N!==m._v$&&((m._v$=N)!=null?$.style.setProperty("width",N):$.style.removeProperty("width")),E!==m._v$2&&((m._v$2=E)!=null?L.style.setProperty("width",E):L.style.removeProperty("width")),P!==m._v$3&&((m._v$3=P)!=null?_.style.setProperty("width",P):_.style.removeProperty("width")),I!==m._v$4&&((m._v$4=I)!=null?C.style.setProperty("width",I):C.style.removeProperty("width")),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()},Je=v("<div>"),Ke=v('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">'),Ze=n=>{let s=n.selected?"bg-white border-4 border-success":"bg-success";return typeof n.latency!="number"||n.latency===D().NOT_CONNECTED?s=n.selected?"bg-white border-4 border-neutral":"bg-neutral":n.latency>D().HIGH?s=n.selected?"bg-white border-4 border-error":"bg-error":n.latency>D().MEDIUM&&(s=n.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const r=Je();return w(i=>{const c=j("h-4 w-4 rounded-full",s),o=n.name;return c!==i._v$&&ue(r,i._v$=c),o!==i._v$2&&xe(r,"title",i._v$2=o),i},{_v$:void 0,_v$2:void 0}),r})()},Ge=n=>{const{latencyMap:s}=Z();return(()=>{const r=Ke(),i=r.firstChild;return t(i,e(U,{get each(){return n.proxyNameList.map(c=>[c,s()[c]])},children:([c,o])=>{const g=n.now===c;return e(Ze,{name:c,latency:o,selected:g})}})),r})()},oe=v('<div class="flex flex-1 flex-col gap-2">'),et=v('<div class="flex flex-col gap-2 sm:flex-row">'),de=n=>{const s=$e(()=>n.children),r=pe(),i=f(()=>r.width>=640),c=f(()=>s.toArray().filter((g,h)=>h%2===0)),o=f(()=>s.toArray().filter((g,h)=>h%2===1));return(()=>{const g=et();return t(g,e(A,{get when(){return i()},get fallback(){return n.children},get children(){return[(()=>{const h=oe();return t(h,c),h})(),(()=>{const h=oe();return t(h,o),h})()]}})),g})()},tt=v("<progress class=progress max=100>"),nt=v('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),rt=v('<div class="text-sm text-slate-500">: '),st=n=>{const{Download:s=0,Upload:r=0,Total:i=0,Expire:c=0}=n,o=te(i,{units:"iec"}),g=te(s+r,{units:"iec"}),h=_e.toFinite(((s+r)/i*100).toFixed(2));return{total:o,used:g,percentage:h,expirePrefix:()=>{const[$]=q();return $("expire")},expireStr:()=>{const[$]=q();return c===0?$("noExpire"):be(c*1e3).format("YYYY-MM-DD")}}},lt=n=>{if(!n.subscriptionInfo)return;const s=st(n.subscriptionInfo);return[(()=>{const r=tt();return w(()=>r.value=s.percentage),r})(),(()=>{const r=nt(),i=r.firstChild,c=i.nextSibling,o=c.nextSibling,g=o.nextSibling;return g.nextSibling,t(r,()=>`${s.used}`,i),t(r,()=>`${s.total}`,c),t(r,()=>s.percentage,g),r})(),(()=>{const r=rt(),i=r.firstChild;return t(r,()=>s.expirePrefix(),i),t(r,()=>s.expireStr(),null),r})()]},it=v('<div class="tabs-boxed tabs gap-2">'),at=v('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto pb-2">'),ct=v('<button><span></span><div class="badge badge-sm">'),ot=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),dt=v('<div class="text-sm text-slate-500"> '),ut=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),gt=v('<div class="text-sm text-slate-500"> :: <!> ');var B=function(n){return n.proxyProviders="proxyProviders",n.proxies="proxies",n}(B||{});const mt=()=>{let n;const[s]=q(),{fetchProxies:r,proxies:i,selectProxyInGroup:c,latencyMap:o,proxyGroupNames:g,proxyProviders:h,updateProviderByProviderName:u,updateAllProvider:M,proxyGroupLatencyTest:$,proxyProviderLatencyTest:L,collapsedMap:_,setCollapsedMap:C,proxyGroupLatencyTestingMap:m,proxyProviderLatencyTestingMap:N,isAllProviderUpdating:E,updatingMap:P}=Z();we(r);const I=f(()=>se()?i().filter(p=>p.name!=="GLOBAL"):i()),z=async(p,S)=>{p.stopPropagation(),$(S)},W=(p,S)=>{p.stopPropagation(),L(S)},R=(p,S)=>{p.stopPropagation(),u(S)},d=async p=>{p.stopPropagation(),M()},[x,he]=ye(B.proxies),ve=()=>[{type:B.proxies,name:s("proxies"),count:I().length},{type:B.proxyProviders,name:s("proxyProviders"),count:h().length}];return(()=>{const p=at(),S=p.firstChild,Q=S.firstChild,G=S.nextSibling;return t(S,e(A,{get when(){return!se()},get children(){const l=it();return t(l,e(U,{get each(){return ve()},children:T=>(()=>{const k=ct(),a=k.firstChild,b=a.nextSibling;return k.$$click=()=>he(T.type),t(a,()=>T.name),t(b,()=>T.count),w(()=>ue(k,j(x()===T.type&&"tab-active","tab-sm tab gap-2 px-2"))),k})()})),l}}),Q),t(S,e(A,{get when(){return x()===B.proxyProviders},get children(){return e(Y,{class:"btn btn-circle btn-sm",get disabled(){return E()},onClick:l=>d(l),get icon(){return e(ne,{get class(){return j(E()&&"animate-spin text-success")}})}})}}),Q),t(Q,e(Y,{class:"btn-circle btn-sm",onClick:()=>n==null?void 0:n.showModal(),get icon(){return e(Ce,{})}})),t(G,e(A,{get when(){return x()===B.proxies},get children(){return e(de,{get children(){return e(U,{get each(){return I()},children:l=>{const T=f(()=>je(le(l.all??[],o(),K(),g()),o(),g(),ge())),k=[(()=>{const a=ot(),b=a.firstChild,y=b.firstChild,V=y.nextSibling;return t(y,()=>l.name),t(V,()=>{var F;return(F=l.all)==null?void 0:F.length}),t(b,e(He,{get name(){return l.now}}),null),t(a,e(Y,{class:"btn-circle btn-sm",get disabled(){return m()[l.name]},onClick:F=>z(F,l.name),get icon(){return e(re,{get class(){return j(m()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{const a=dt(),b=a.firstChild;return t(a,()=>l.type,b),t(a,()=>{var y;return((y=l.now)==null?void 0:y.length)>0&&` :: ${l.now}`},null),a})(),e(A,{get when(){return!_()[l.name]},get children(){return e(ce,{get proxyNameList(){return T()},get now(){return l.now}})}})];return e(ie,{get isOpen(){return _()[l.name]},title:k,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return T()},children:a=>e(ae,{proxyName:a,get isSelected(){return l.now===a},onClick:()=>void c(l,a)})})}})}})}})}}),null),t(G,e(A,{get when(){return x()===B.proxyProviders},get children(){return e(de,{get children(){return e(U,{get each(){return h()},children:l=>{const T=f(()=>le(l.proxies.map(a=>a.name)??[],o(),K(),void 0)),k=[(()=>{const a=ut(),b=a.firstChild,y=b.firstChild,V=y.nextSibling,F=b.nextSibling;return t(y,()=>l.name),t(V,()=>l.proxies.length),t(F,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return P()[l.name]},onClick:J=>R(J,l.name),get icon(){return e(ne,{get class(){return j(P()[l.name]&&"animate-spin text-success")}})}}),null),t(F,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return N()[l.name]},onClick:J=>W(J,l.name),get icon(){return e(re,{get class(){return j(N()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),e(lt,{get subscriptionInfo(){return l.subscriptionInfo}}),(()=>{const a=gt(),b=a.firstChild,y=b.nextSibling;return y.nextSibling,t(a,()=>l.vehicleType,b),t(a,()=>s("updated"),y),t(a,()=>Ye(l.updatedAt),null),a})(),e(A,{get when(){return!_()[l.name]},get children(){return e(ce,{get proxyNameList(){return T()}})}})];return e(ie,{get isOpen(){return _()[l.name]},title:k,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return T()},children:a=>e(ae,{proxyName:a})})}})}})}})}}),null),t(p,e(qe,{ref:l=>n=l}),null),p})()};Pe(["click"]);export{mt as default};
