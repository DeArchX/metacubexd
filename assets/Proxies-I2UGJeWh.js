import{c as e,J as fe,i as t,v as m,F as A,b,d as v,at as xe,au as re,S as O,t as F,B as Z,E as $e,A as pe,av as _e,e as se,l as be,o as we,a4 as ye,g as Ce,aw as le,N as Pe,R as ie,z as Se}from"./vendor-zz06Ag2Q.js";import{u as Q,K as Te,N as Le,O as Ne,P as Ee,Q as Ie,R as De,S as Me,U as ke,V as Oe,W as H,X as Ae,Y as Ue,Z as Be,_ as Fe,$ as J,a0 as he,a1 as K,a2 as X,M as Re,a3 as D,a4 as G,a5 as je,B as Y,a6 as He,a7 as ae,a8 as Ye,a9 as ce,aa as oe,q as ze}from"./index-wnSbOD0X.js";import{C as k}from"./ConfigTitle-Fd4OdpHw.js";const We=v('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),Xe=v('<option class="flex items-center gap-2">'),Qe=v("<option>"),Ve=n=>{const[l]=Q();return e(Re,{ref:r=>{var i;return(i=n.ref)==null?void 0:i.call(n,r)},get icon(){return e(fe,{size:24})},get title(){return l("proxiesSettings")},get children(){const r=We(),i=r.firstChild,c=i.firstChild,o=c.firstChild,u=i.nextSibling,h=u.firstChild,g=u.nextSibling,M=g.firstChild,p=g.nextSibling,T=p.firstChild,w=p.nextSibling,y=w.firstChild,f=w.nextSibling,L=f.firstChild,N=L.firstChild,C=f.nextSibling,E=C.firstChild,z=E.firstChild,W=C.nextSibling,R=W.firstChild;return t(i,e(k,{withDivider:!0,get children(){return l("autoCloseConns")}}),c),o.addEventListener("change",d=>Te(d.target.checked)),t(u,e(k,{withDivider:!0,get children(){return l("urlForLatencyTest")}}),h),h.addEventListener("change",d=>Le(d.target.value)),t(g,e(k,{withDivider:!0,get children(){return[m(()=>l("latencyTestTimeoutDuration"))," (",m(()=>l("ms")),")"]}}),M),M.addEventListener("change",d=>Ne(Number(d.target.value))),t(p,e(k,{withDivider:!0,get children(){return l("urlForIPv6SupportTest")}}),T),T.addEventListener("change",d=>{var x;return Ee((x=d.target.value)==null?void 0:x.trim())}),t(w,e(k,{withDivider:!0,get children(){return l("proxiesSorting")}}),y),y.addEventListener("change",d=>Ie(d.target.value)),t(y,e(A,{get each(){return Object.values(De)},children:d=>(()=>{const x=Xe();return x.value=d,t(x,()=>l(d)),x})()})),t(f,e(k,{withDivider:!0,get children(){return l("hideUnAvailableProxies")}}),L),N.addEventListener("change",d=>Me(d.target.checked)),t(C,e(k,{withDivider:!0,get children(){return l("renderInTwoColumns")}}),E),z.addEventListener("change",d=>ke(d.target.checked)),t(W,e(k,{withDivider:!0,get children(){return l("proxiesPreviewType")}}),R),R.addEventListener("change",d=>Oe(d.target.value)),t(R,e(A,{get each(){return Object.values(H)},children:d=>(()=>{const x=Qe();return x.value=d,t(x,()=>l(d)),x})()})),b(()=>o.checked=Ae()),b(()=>h.value=Ue()),b(()=>M.value=Be()),b(()=>T.value=Fe()),b(()=>y.value=J()),b(()=>N.checked=he()),b(()=>z.checked=K()),b(()=>R.value=X()),r}})},de=n=>{const l=()=>X()===H.OFF,r=m(()=>n.proxyNameList.length<=10),i=m(()=>{const o=X();return o===H.BAR||o===H.Auto&&!r()}),c=m(()=>{const o=X();return o===H.DOTS||o===H.Auto&&r()});return e(O,{get when(){return!l()},get children(){return e(xe,{get children(){return[e(re,{get when(){return i()},get children(){return e(Je,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}}),e(re,{get when(){return c()},get children(){return e(et,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}})]}})}})},qe=v('<div class="flex items-center gap-2 py-1"><div class="my-2 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>'),Je=n=>{const{latencyMap:l}=G(),r=m(()=>n.proxyNameList.map(g=>l()[g])),i=m(()=>r().length),c=m(()=>r().filter(g=>g>D().NOT_CONNECTED&&g<=D().MEDIUM).length),o=m(()=>r().filter(g=>g>D().MEDIUM&&g<=D().HIGH).length),u=m(()=>r().filter(g=>g>D().HIGH).length),h=m(()=>r().filter(g=>g===D().NOT_CONNECTED).length);return(()=>{const g=qe(),M=g.firstChild,p=M.firstChild,T=p.nextSibling,w=T.nextSibling,y=w.nextSibling;return b(f=>{const L=`${c()*100/i()}%`,N=`${o()*100/i()}%`,C=`${u()*100/i()}%`,E=`${h()*100/i()}%`;return L!==f._v$&&((f._v$=L)!=null?p.style.setProperty("width",L):p.style.removeProperty("width")),N!==f._v$2&&((f._v$2=N)!=null?T.style.setProperty("width",N):T.style.removeProperty("width")),C!==f._v$3&&((f._v$3=C)!=null?w.style.setProperty("width",C):w.style.removeProperty("width")),E!==f._v$4&&((f._v$4=E)!=null?y.style.setProperty("width",E):y.style.removeProperty("width")),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),g})()},Ke=v("<div>"),Ze=v('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">'),Ge=n=>{let l=n.selected?"bg-white border-4 border-success":"bg-success";return typeof n.latency!="number"||n.latency===D().NOT_CONNECTED?l=n.selected?"bg-white border-4 border-neutral":"bg-neutral":n.latency>D().HIGH?l=n.selected?"bg-white border-4 border-error":"bg-error":n.latency>D().MEDIUM&&(l=n.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const r=Ke();return b(i=>{const c=F("h-4 w-4 rounded-full",l),o=n.name;return c!==i._v$&&Z(r,i._v$=c),o!==i._v$2&&$e(r,"title",i._v$2=o),i},{_v$:void 0,_v$2:void 0}),r})()},et=n=>{const{latencyMap:l}=G();return(()=>{const r=Ze(),i=r.firstChild;return t(i,e(A,{get each(){return n.proxyNameList.map(c=>[c,l()[c]])},children:([c,o])=>{const u=n.now===c;return e(Ge,{name:c,latency:o,selected:u})}})),r})()},ue=v('<div class="flex flex-1 flex-col gap-2">'),tt=v("<div>"),ge=n=>{const l=pe(()=>n.children),r=_e(),i=m(()=>r.width>=640&&K()),c=m(()=>l.toArray().filter((u,h)=>h%2===0)),o=m(()=>l.toArray().filter((u,h)=>h%2===1));return(()=>{const u=tt();return t(u,e(O,{get when(){return i()},get fallback(){return n.children},get children(){return[(()=>{const h=ue();return t(h,c),h})(),(()=>{const h=ue();return t(h,o),h})()]}})),b(()=>Z(u,F("flex flex-col gap-2",K()&&"lg:flex-row"))),u})()},nt=v("<progress class=progress max=100>"),rt=v('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),st=v('<div class="text-sm text-slate-500">: '),lt=n=>{const{Download:l=0,Upload:r=0,Total:i=0,Expire:c=0}=n,o=se(i,{units:"iec"}),u=se(l+r,{units:"iec"}),h=be.toFinite(((l+r)/i*100).toFixed(2));return{total:o,used:u,percentage:h,expirePrefix:()=>{const[p]=Q();return p("expire")},expireStr:()=>{const[p]=Q();return c===0?p("noExpire"):we(c*1e3).format("YYYY-MM-DD")}}},it=n=>{if(!n.subscriptionInfo)return;const l=lt(n.subscriptionInfo);return[(()=>{const r=nt();return b(()=>r.value=l.percentage),r})(),(()=>{const r=rt(),i=r.firstChild,c=i.nextSibling,o=c.nextSibling,u=o.nextSibling;return u.nextSibling,t(r,()=>`${l.used}`,i),t(r,()=>`${l.total}`,c),t(r,()=>l.percentage,u),r})(),(()=>{const r=st(),i=r.firstChild;return t(r,()=>l.expirePrefix(),i),t(r,()=>l.expireStr(),null),r})()]},at=v('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 pb-2">'),ct=v('<button><span></span><div class="badge badge-sm">'),ot=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),dt=v("<span class=text-primary>"),ut=v('<div class="text-sm text-slate-500"> '),gt=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),ht=v('<div class="text-sm text-slate-500"> :: <!> ');var B=function(n){return n.proxyProviders="proxyProviders",n.proxies="proxies",n}(B||{});const xt=()=>{let n;const[l]=Q(),{fetchProxies:r,proxies:i,selectProxyInGroup:c,latencyMap:o,proxyGroupNames:u,proxyProviders:h,updateProviderByProviderName:g,updateAllProvider:M,proxyGroupLatencyTest:p,proxyProviderLatencyTest:T,collapsedMap:w,setCollapsedMap:y,proxyGroupLatencyTestingMap:f,proxyProviderLatencyTestingMap:L,isAllProviderUpdating:N,updatingMap:C}=G();ye(r);const E=m(()=>je()?i().filter(_=>_.name!=="GLOBAL"):i()),z=async(_,I)=>{_.stopPropagation(),p(I)},W=(_,I)=>{_.stopPropagation(),T(I)},R=(_,I)=>{_.stopPropagation(),g(I)},d=async _=>{_.stopPropagation(),M()},[x,ve]=Ce(B.proxies),me=()=>[{type:B.proxies,name:l("proxies"),count:E().length},{type:B.proxyProviders,name:l("proxyProviders"),count:h().length}];return(()=>{const _=at(),I=_.firstChild,ee=I.firstChild,te=ee.nextSibling,ne=I.nextSibling;return t(ee,e(A,{get each(){return me()},children:s=>(()=>{const P=ct(),j=P.firstChild,a=j.nextSibling;return P.$$click=()=>ve(s.type),t(j,()=>s.name),t(a,()=>s.count),b(()=>Z(P,F(x()===s.type&&"tab-active","tab-sm tab gap-2 px-2"))),P})()})),t(I,e(O,{get when(){return x()===B.proxyProviders},get children(){return e(Y,{class:"btn btn-circle btn-sm",get disabled(){return N()},onClick:s=>d(s),get icon(){return e(le,{get class(){return F(N()&&"animate-spin text-success")}})}})}}),te),t(te,e(Y,{class:"btn-circle btn-sm",onClick:()=>n==null?void 0:n.showModal(),get icon(){return e(Pe,{})}})),t(ne,e(O,{get when(){return x()===B.proxies},get children(){return e(ge,{get children(){return e(A,{get each(){return E()},children:s=>{const P=m(()=>He(ae(s.all??[],o(),J(),u()),o(),u(),he())),j=[(()=>{const a=ot(),S=a.firstChild,$=S.firstChild,V=$.nextSibling;return t($,()=>s.name),t(V,()=>{var U;return(U=s.all)==null?void 0:U.length}),t(S,e(Ye,{get name(){return s.now}}),null),t(a,e(Y,{class:"btn-circle btn-sm",get disabled(){return f()[s.name]},onClick:U=>z(U,s.name),get icon(){return e(ie,{get class(){return F(f()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{const a=ut(),S=a.firstChild;return t(a,()=>s.type,S),t(a,e(O,{get when(){var $;return(($=s.now)==null?void 0:$.length)>0},get children(){return[":: ",(()=>{const $=dt();return t($,()=>s.now),$})()]}}),null),a})(),e(O,{get when(){return!w()[s.name]},get children(){return e(de,{get proxyNameList(){return P()},get now(){return s.now}})}})];return e(ce,{get isOpen(){return w()[s.name]},title:j,onCollapse:a=>y(s.name,a),get children(){return e(A,{get each(){return P()},children:a=>e(oe,{proxyName:a,get isSelected(){return s.now===a},onClick:()=>void c(s,a)})})}})}})}})}}),null),t(ne,e(O,{get when(){return x()===B.proxyProviders},get children(){return e(ge,{get children(){return e(A,{get each(){return h()},children:s=>{const P=m(()=>ae(s.proxies.map(a=>a.name)??[],o(),J(),void 0)),j=[(()=>{const a=gt(),S=a.firstChild,$=S.firstChild,V=$.nextSibling,U=S.nextSibling;return t($,()=>s.name),t(V,()=>s.proxies.length),t(U,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return C()[s.name]},onClick:q=>R(q,s.name),get icon(){return e(le,{get class(){return F(C()[s.name]&&"animate-spin text-success")}})}}),null),t(U,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return L()[s.name]},onClick:q=>W(q,s.name),get icon(){return e(ie,{get class(){return F(L()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),e(it,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{const a=ht(),S=a.firstChild,$=S.nextSibling;return $.nextSibling,t(a,()=>s.vehicleType,S),t(a,()=>l("updated"),$),t(a,()=>ze(s.updatedAt),null),a})(),e(O,{get when(){return!w()[s.name]},get children(){return e(de,{get proxyNameList(){return P()}})}})];return e(ce,{get isOpen(){return w()[s.name]},title:j,onCollapse:a=>y(s.name,a),get children(){return e(A,{get each(){return P()},children:a=>e(oe,{proxyName:a})})}})}})}})}}),null),t(_,e(Ve,{ref:s=>n=s}),null),_})()};Se(["click"]);export{xt as default};
