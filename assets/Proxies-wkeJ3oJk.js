import{c as e,H as me,i as t,A as f,F as O,b as p,d as v,at as fe,au as ne,S as F,t as B,g as ge,D as xe,f as $e,av as _e,h as re,q as pe,Y as be,a4 as we,k as ye,aw as se,M as Ce,Q as le,e as Pe}from"./vendor-K_-04A7A.js";import{u as X,J as Se,K as Te,N as Le,O as Ne,P as Ee,Q as Ie,R as De,S as Me,U as ke,V as H,W as Oe,X as Ae,Y as Ue,Z as Fe,_ as J,$ as he,a0 as Re,a1 as W,M as je,a2 as I,a3 as K,a4 as Z,B as Y,a5 as Be,a6 as ie,a7 as ae,a8 as ce}from"./index-M3PCHklP.js";import{f as He}from"./global-npVD3kOn.js";import{C as k}from"./ConfigTitle-j1HkXMNR.js";const Ye=v('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),ze=v('<option class="flex items-center gap-2">'),Qe=v("<option>"),We=n=>{const[l]=X();return e(je,{ref:r=>{var i;return(i=n.ref)==null?void 0:i.call(n,r)},get icon(){return e(me,{size:24})},get title(){return l("proxiesSettings")},get children(){const r=Ye(),i=r.firstChild,o=i.firstChild,d=o.firstChild,g=i.nextSibling,h=g.firstChild,u=g.nextSibling,D=u.firstChild,x=u.nextSibling,T=x.firstChild,$=x.nextSibling,y=$.firstChild,m=$.nextSibling,L=m.firstChild,N=L.firstChild,C=m.nextSibling,M=C.firstChild,z=M.firstChild,Q=C.nextSibling,R=Q.firstChild;return t(i,e(k,{withDivider:!0,get children(){return l("autoCloseConns")}}),o),d.addEventListener("change",c=>Se(c.target.checked)),t(g,e(k,{withDivider:!0,get children(){return l("urlForLatencyTest")}}),h),h.addEventListener("change",c=>Te(c.target.value)),t(u,e(k,{withDivider:!0,get children(){return[f(()=>l("latencyTestTimeoutDuration"))," (",f(()=>l("ms")),")"]}}),D),D.addEventListener("change",c=>Le(Number(c.target.value))),t(x,e(k,{withDivider:!0,get children(){return l("urlForIPv6SupportTest")}}),T),T.addEventListener("change",c=>{var _;return Ne((_=c.target.value)==null?void 0:_.trim())}),t($,e(k,{withDivider:!0,get children(){return l("proxiesSorting")}}),y),y.addEventListener("change",c=>Ee(c.target.value)),t(y,e(O,{get each(){return Object.values(Ie)},children:c=>(()=>{const _=ze();return _.value=c,t(_,()=>l(c)),_})()})),t(m,e(k,{withDivider:!0,get children(){return l("hideUnAvailableProxies")}}),L),N.addEventListener("change",c=>De(c.target.checked)),t(C,e(k,{withDivider:!0,get children(){return l("renderInTwoColumns")}}),M),z.addEventListener("change",c=>Me(c.target.checked)),t(Q,e(k,{withDivider:!0,get children(){return l("proxiesPreviewType")}}),R),R.addEventListener("change",c=>ke(c.target.value)),t(R,e(O,{get each(){return Object.values(H)},children:c=>(()=>{const _=Qe();return _.value=c,t(_,()=>l(c)),_})()})),p(()=>d.checked=Oe()),p(()=>h.value=Ae()),p(()=>D.value=Ue()),p(()=>T.value=Fe()),p(()=>y.value=J()),p(()=>N.checked=he()),p(()=>z.checked=Re()),p(()=>R.value=W()),r}})},oe=n=>{const l=()=>W()===H.OFF,r=f(()=>n.proxyNameList.length<=10),i=f(()=>{const d=W();return d===H.BAR||d===H.Auto&&!r()}),o=f(()=>{const d=W();return d===H.DOTS||d===H.Auto&&r()});return e(F,{get when(){return!l()},get children(){return e(fe,{get children(){return[e(ne,{get when(){return i()},get children(){return e(Ve,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}}),e(ne,{get when(){return o()},get children(){return e(Ze,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}})]}})}})},Xe=v('<div class="flex items-center gap-2 py-2"><div class="my-2 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>'),Ve=n=>{const{latencyMap:l}=Z(),r=f(()=>n.proxyNameList.map(u=>l()[u])),i=f(()=>r().length),o=f(()=>r().filter(u=>u>I().NOT_CONNECTED&&u<=I().MEDIUM).length),d=f(()=>r().filter(u=>u>I().MEDIUM&&u<=I().HIGH).length),g=f(()=>r().filter(u=>u>I().HIGH).length),h=f(()=>r().filter(u=>u===I().NOT_CONNECTED).length);return(()=>{const u=Xe(),D=u.firstChild,x=D.firstChild,T=x.nextSibling,$=T.nextSibling,y=$.nextSibling;return t(u,e(K,{get name(){return n.now}}),null),p(m=>{const L=`${o()*100/i()}%`,N=`${d()*100/i()}%`,C=`${g()*100/i()}%`,M=`${h()*100/i()}%`;return L!==m._v$&&((m._v$=L)!=null?x.style.setProperty("width",L):x.style.removeProperty("width")),N!==m._v$2&&((m._v$2=N)!=null?T.style.setProperty("width",N):T.style.removeProperty("width")),C!==m._v$3&&((m._v$3=C)!=null?$.style.setProperty("width",C):$.style.removeProperty("width")),M!==m._v$4&&((m._v$4=M)!=null?y.style.setProperty("width",M):y.style.removeProperty("width")),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()},qe=v("<div>"),Je=v('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">'),Ke=n=>{let l=n.selected?"bg-white border-4 border-success":"bg-success";return typeof n.latency!="number"||n.latency===I().NOT_CONNECTED?l=n.selected?"bg-white border-4 border-neutral":"bg-neutral":n.latency>I().HIGH?l=n.selected?"bg-white border-4 border-error":"bg-error":n.latency>I().MEDIUM&&(l=n.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const r=qe();return p(i=>{const o=B("h-4 w-4 rounded-full",l),d=n.name;return o!==i._v$&&ge(r,i._v$=o),d!==i._v$2&&xe(r,"title",i._v$2=d),i},{_v$:void 0,_v$2:void 0}),r})()},Ze=n=>{const{latencyMap:l}=Z();return(()=>{const r=Je(),i=r.firstChild;return t(i,e(O,{get each(){return n.proxyNameList.map(o=>[o,l()[o]])},children:([o,d])=>{const g=n.now===o;return e(Ke,{name:o,latency:d,selected:g})}})),t(r,e(K,{get name(){return n.now}}),null),r})()},de=v('<div class="flex flex-1 flex-col gap-2">'),Ge=v('<div class="flex flex-col gap-2 sm:flex-row">'),ue=n=>{const l=$e(()=>n.children),r=_e(),i=f(()=>r.width>=640),o=f(()=>l.toArray().filter((g,h)=>h%2===0)),d=f(()=>l.toArray().filter((g,h)=>h%2===1));return(()=>{const g=Ge();return t(g,e(F,{get when(){return i()},get fallback(){return n.children},get children(){return[(()=>{const h=de();return t(h,o),h})(),(()=>{const h=de();return t(h,d),h})()]}})),g})()},et=v("<progress class=progress max=100>"),tt=v('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),nt=v('<div class="text-sm text-slate-500">: '),rt=n=>{const{Download:l=0,Upload:r=0,Total:i=0,Expire:o=0}=n,d=re(i,{units:"iec"}),g=re(l+r,{units:"iec"}),h=pe.toFinite(((l+r)/i*100).toFixed(2));return{total:d,used:g,percentage:h,expirePrefix:()=>{const[x]=X();return x("expire")},expireStr:()=>{const[x]=X();return o===0?x("noExpire"):be(o*1e3).format("YYYY-MM-DD")}}},st=n=>{if(!n.subscriptionInfo)return;const l=rt(n.subscriptionInfo);return[(()=>{const r=et();return p(()=>r.value=l.percentage),r})(),(()=>{const r=tt(),i=r.firstChild,o=i.nextSibling,d=o.nextSibling,g=d.nextSibling;return g.nextSibling,t(r,()=>`${l.used}`,i),t(r,()=>`${l.total}`,o),t(r,()=>l.percentage,g),r})(),(()=>{const r=nt(),i=r.firstChild;return t(r,()=>l.expirePrefix(),i),t(r,()=>l.expireStr(),null),r})()]},lt=v('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),it=v('<button><span></span><div class="badge badge-sm">'),at=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),ct=v('<div class="text-sm text-slate-500"> '),ot=v('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),dt=v('<div class="text-sm text-slate-500"> :: <!> ');var U=function(n){return n.proxyProviders="proxyProviders",n.proxies="proxies",n}(U||{});const mt=()=>{let n;const[l]=X(),{fetchProxies:r,proxies:i,selectProxyInGroup:o,latencyMap:d,proxyGroupNames:g,proxyProviders:h,updateProviderByProviderName:u,updateAllProvider:D,proxyGroupLatencyTest:x,proxyProviderLatencyTest:T,collapsedMap:$,setCollapsedMap:y,proxyGroupLatencyTestingMap:m,proxyProviderLatencyTestingMap:L,isAllProviderUpdating:N,updatingMap:C}=Z();we(r);const M=async(b,E)=>{b.stopPropagation(),x(E)},z=(b,E)=>{b.stopPropagation(),T(E)},Q=(b,E)=>{b.stopPropagation(),u(E)},R=async b=>{b.stopPropagation(),D()},[c,_]=ye(U.proxies),ve=()=>[{type:U.proxies,name:l("proxies"),count:i().length},{type:U.proxyProviders,name:l("proxyProviders"),count:h().length}];return(()=>{const b=lt(),E=b.firstChild,G=E.firstChild,ee=G.nextSibling,te=E.nextSibling;return t(G,e(O,{get each(){return ve()},children:s=>(()=>{const P=it(),j=P.firstChild,a=j.nextSibling;return P.$$click=()=>_(s.type),t(j,()=>s.name),t(a,()=>s.count),p(()=>ge(P,B(c()===s.type&&"tab-active","tab-sm tab gap-2 px-2"))),P})()})),t(E,e(F,{get when(){return c()===U.proxyProviders},get children(){return e(Y,{class:"btn btn-circle btn-sm",get disabled(){return N()},onClick:s=>R(s),get icon(){return e(se,{get class(){return B(N()&&"animate-spin text-success")}})}})}}),ee),t(ee,e(Y,{class:"btn-circle btn-sm",onClick:()=>n==null?void 0:n.showModal(),get icon(){return e(Ce,{})}})),t(te,e(F,{get when(){return c()===U.proxies},get children(){return e(ue,{get children(){return e(O,{get each(){return i()},children:s=>{const P=f(()=>Be(ie(s.all??[],d(),J(),g()),d(),g(),he())),j=[(()=>{const a=at(),S=a.firstChild,w=S.firstChild,V=w.nextSibling;return t(w,()=>s.name),t(V,()=>{var A;return(A=s.all)==null?void 0:A.length}),t(S,e(K,{get name(){return s.now}}),null),t(a,e(Y,{class:"btn-circle btn-sm",get disabled(){return m()[s.name]},onClick:A=>M(A,s.name),get icon(){return e(le,{get class(){return B(m()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{const a=ct(),S=a.firstChild;return t(a,()=>s.type,S),t(a,()=>{var w;return((w=s.now)==null?void 0:w.length)>0&&` :: ${s.now}`},null),a})(),e(F,{get when(){return!$()[s.name]},get children(){return e(oe,{get proxyNameList(){return P()},get now(){return s.now}})}})];return e(ae,{get isOpen(){return $()[s.name]},title:j,onCollapse:a=>y(s.name,a),get children(){return e(O,{get each(){return P()},children:a=>e(ce,{proxyName:a,get isSelected(){return s.now===a},onClick:()=>void o(s,a)})})}})}})}})}}),null),t(te,e(F,{get when(){return c()===U.proxyProviders},get children(){return e(ue,{get children(){return e(O,{get each(){return h()},children:s=>{const P=f(()=>ie(s.proxies.map(a=>a.name)??[],d(),J(),void 0)),j=[(()=>{const a=ot(),S=a.firstChild,w=S.firstChild,V=w.nextSibling,A=S.nextSibling;return t(w,()=>s.name),t(V,()=>s.proxies.length),t(A,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return C()[s.name]},onClick:q=>Q(q,s.name),get icon(){return e(se,{get class(){return B(C()[s.name]&&"animate-spin text-success")}})}}),null),t(A,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return L()[s.name]},onClick:q=>z(q,s.name),get icon(){return e(le,{get class(){return B(L()[s.name]&&"animate-pulse text-success")}})}}),null),a})(),e(st,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{const a=dt(),S=a.firstChild,w=S.nextSibling;return w.nextSibling,t(a,()=>s.vehicleType,S),t(a,()=>l("updated"),w),t(a,()=>He(s.updatedAt),null),a})(),e(F,{get when(){return!$()[s.name]},get children(){return e(oe,{get proxyNameList(){return P()}})}})];return e(ae,{get isOpen(){return $()[s.name]},title:j,onCollapse:a=>y(s.name,a),get children(){return e(O,{get each(){return P()},children:a=>e(ce,{proxyName:a})})}})}})}})}}),null),t(b,e(We,{ref:s=>n=s}),null),b})()};Pe(["click"]);export{mt as default};
