import{i as e,c as t,S as E,d as h,a5 as C,a2 as J,k as K,O as Y,F as I,a1 as re,az as ie,p as ee,Q as ce,b as g,E as B,a3 as le,w as oe}from"./vendor-XL6gZW1S.js";import{u as O,a5 as G,af as de,B as w,ag as b,ah as ue,ai as ge,aj as pe,ak as he,al as ve,am as fe,an as be,ao as me,ap as _e,aq as $e,b as xe,ar as Ce,as as R,at as H,au as ke,av as ye,aw as Se,ax as X,ay as we,az as W,aA as Ee,aB as De,aC as Le,aD as Z,aE as Ne,aF as Ae}from"./index-6zEXvYxw.js";import{C as y}from"./ConfigTitle-mdfEp71g.js";const Fe=h('<div class="flex flex-col p-4">'),Ie=h('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Pe=h("<div class=py-2>"),Te=h('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Be=h('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-allow-lan class="label gap-2"><span class=label-text></span></label><input id=enable-allow-lan type=checkbox class=toggle></div><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>Mixed</option><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),Oe=h('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),Re=h('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Qe=h('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),Ge=h('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle>'),Q=h("<option>"),Me=h('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),je=h('<div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full">'),qe=h('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),ze=C.object({name:C.string(),type:C.string()}),Ue=()=>{const[l]=O(),d=de(),{form:p,isSubmitting:m}=J({extend:le({schema:ze}),onSubmit:c=>d.get("dns/query",{searchParams:{name:c.name,type:c.type}}).json().then(({Answer:s})=>$((s==null?void 0:s.map(({data:a})=>a))||[])).catch(s=>oe.error(s.message))}),[_,$]=K([]);return(()=>{const c=Ie(),s=c.firstChild,a=s.firstChild,i=a.nextSibling;return i.firstChild,Y(p,s,()=>p),e(i,t(w,{type:"submit",class:"btn-primary",get loading(){return m()},get children(){return l("dnsQuery")}}),null),e(c,t(E,{get when(){return _().length>0},get children(){const u=Fe();return e(u,t(I,{get each(){return _()},children:x=>(()=>{const k=Pe();return e(k,x),k})()})),u}}),null),c})()},Ve=C.object({port:C.number(),"socks-port":C.number(),"redir-port":C.number(),"tproxy-port":C.number(),"mixed-port":C.number()}),He=()=>{const[l]=O(),d=re(),p=[{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void b("port",Number(a.target.value),s)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void b("socks-port",Number(a.target.value),s)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void b("redir-port",Number(a.target.value),s)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void b("tproxy-port",Number(a.target.value),s)},{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void b("mixed-port",Number(a.target.value),s)}],{form:m,setInitialValues:_,reset:$}=J({extend:le({schema:Ve})}),[c,{refetch:s}]=ie(Ae);return ee(()=>{const a=c();a&&(_(a),$())}),(()=>{const a=Oe(),i=a.firstChild,u=i.firstChild,x=u.nextSibling,k=x.nextSibling,v=i.nextSibling;return i.addEventListener("change",r=>void b("mode",r.target.value,s)),e(u,()=>l("global")),e(x,()=>l("rule")),e(k,()=>l("direct")),e(a,t(E,{get when(){return!G()},get children(){return[(()=>{const r=Te();return Y(m,r,()=>m),e(r,t(I,{each:p,children:o=>(()=>{const D=Re(),L=D.firstChild,P=L.firstChild,S=L.nextSibling;return e(P,()=>o.label()),ce(S,"change",o.onChange),g(f=>{const T=o.key,N=o.key,A=o.key,F=o.label();return T!==f._v$&&B(L,"for",f._v$=T),N!==f._v$2&&B(S,"id",f._v$2=N),A!==f._v$3&&B(S,"name",f._v$3=A),F!==f._v$4&&B(S,"placeholder",f._v$4=F),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),D})()})),r})(),(()=>{const r=Be(),o=r.firstChild,D=o.firstChild,L=D.firstChild,P=D.nextSibling,S=o.nextSibling,f=S.firstChild,T=f.firstChild,N=f.nextSibling,A=S.nextSibling,F=A.firstChild,te=F.firstChild,M=F.nextSibling,j=A.nextSibling,q=j.firstChild,ae=q.firstChild,z=q.nextSibling,ne=j.nextSibling,U=ne.firstChild,se=U.firstChild,V=U.nextSibling;return e(L,()=>l("allowLan")),P.addEventListener("change",n=>void b("allow-lan",n.target.checked,s)),e(T,()=>l("enableTunDevice")),N.addEventListener("change",n=>void b("tun",{enable:n.target.checked},s)),e(te,()=>l("tunModeStack")),M.addEventListener("change",n=>void b("tun",{stack:n.target.value},s)),e(ae,()=>l("tunDeviceName")),z.addEventListener("change",n=>void b("tun",{device:n.target.value},s)),e(se,()=>l("interfaceName")),V.addEventListener("change",n=>void b("interface-name",n.target.value,s)),g(()=>{var n;return P.checked=(n=c())==null?void 0:n["allow-lan"]}),g(()=>{var n;return N.checked=(n=c())==null?void 0:n.tun.enable}),g(()=>{var n;return M.value=(n=c())==null?void 0:n.tun.stack}),g(()=>{var n;return z.value=(n=c())==null?void 0:n.tun.device}),g(()=>{var n;return V.value=(n=c())==null?void 0:n["interface-name"]}),r})()]}}),v),e(v,t(w,{class:"btn-primary",get loading(){return ue()},onClick:ge,get children(){return l("reloadConfig")}}),null),e(v,t(w,{class:"btn-secondary",get loading(){return pe()},onClick:he,get children(){return l("updateGEODatabases")}}),null),e(v,t(w,{class:"btn-accent",get loading(){return ve()},onClick:fe,get children(){return l("flushFakeIP")}}),null),e(v,t(E,{get when(){return!G()},get children(){return t(w,{class:"btn-error",get loading(){return be()},onClick:me,get children(){return l("upgradeCore")}})}}),null),e(v,t(w,{class:"btn-warning",get loading(){return _e()},onClick:$e,get children(){return l("restartCore")}}),null),e(v,t(w,{class:"btn-info",onClick:()=>{xe(""),d(Ce.Setup)},get children(){return l("switchEndpoint")}}),null),g(()=>{var r;return i.value=(r=c())==null?void 0:r.mode}),g(()=>u.value=R.Global),g(()=>x.value=R.Rule),g(()=>k.value=R.Direct),a})()},Xe=()=>{const[l]=O(),d=[{label:()=>l("en"),value:H.EN},{label:()=>l("zh"),value:H.ZH}];return(()=>{const p=Ge(),m=p.firstChild,_=m.firstChild,$=_.firstChild,c=m.nextSibling,s=c.firstChild,a=s.firstChild;return e(_,t(y,{get children(){return l("switchLanguage")}}),$),$.addEventListener("change",i=>ke(i.target.value)),e($,t(I,{each:d,children:i=>(()=>{const u=Q();return e(u,()=>i.label()),g(()=>u.selected=ye()===i.value),g(()=>u.value=i.value),u})()})),e(s,t(y,{get children(){return l("autoSwitchTheme")}}),a),a.addEventListener("change",i=>Se(i.target.checked)),e(c,t(E,{get when(){return X()},get children(){const i=Qe(),u=i.firstChild,x=u.firstChild,k=u.nextSibling,v=k.firstChild;return e(u,t(y,{get children(){return l("favDayTheme")}}),x),x.addEventListener("change",r=>we(r.target.value)),e(x,t(I,{each:W,children:r=>(()=>{const o=Q();return o.value=r,e(o,r),o})()})),e(k,t(y,{get children(){return l("favNightTheme")}}),v),v.addEventListener("change",r=>Ee(r.target.value)),e(v,t(I,{each:W,children:r=>(()=>{const o=Q();return o.value=r,e(o,r),o})()})),g(()=>x.value=De()),g(()=>v.value=Le()),i}}),null),g(()=>a.checked=X()),p})()},We=()=>{const[l,d]=K(!1);return ee(async()=>{const p=Z();p&&d(await Ne(p))}),(()=>{const p=je(),m=p.firstChild,_=m.nextSibling,$=_.firstChild;return e(m,()=>"1.134.0"),e(_,t(E,{get when(){return l()},get children(){return Me()}}),$),e($,Z),p})()},Ye=()=>{const[l]=O();return(()=>{const d=qe();return e(d,t(E,{get when(){return!G()},get children(){return[t(y,{withDivider:!0,get children(){return l("dnsQuery")}}),t(Ue,{})]}}),null),e(d,t(y,{withDivider:!0,get children(){return l("coreConfig")}}),null),e(d,t(He,{}),null),e(d,t(y,{withDivider:!0,get children(){return l("xdConfig")}}),null),e(d,t(Xe,{}),null),e(d,t(y,{withDivider:!0,get children(){return l("version")}}),null),e(d,t(We,{}),null),d})()};export{Ye as default};
